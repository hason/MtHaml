--JADE--


mixin form(method, action)
  form(method=method, action=action)
    - set csrf_token_from_somewhere = 'hey'
    input(type='hidden', name='_csrf', value=csrf_token_from_somewhere)
    block

html
  body
    +form('GET', '/search')
      input(type='text', name='query', placeholder='Search')
      input(type='submit', value='Search')

html
  body
    +form('POST', '/search')
      input(type='text', name='query', placeholder='Search')
      input(type='submit', value='Search')

html
  body
    +form('POST', '/search')

mixin bar()
  #bar
    block

mixin foo()
  #foo
    +bar
      block

+foo
  p one
  p two
  p three


mixin baz
    #baz
        block

+baz()= '123'
--EXPECT--
<html>
  <body>
    <form method="GET" action="/search">
      <input type="hidden" name="_csrf" value="hey"/>
      <input type="text" name="query" placeholder="Search"/>
      <input type="submit" value="Search"/>
    </form>
  </body>
</html>
<html>
  <body>
    <form method="POST" action="/search">
      <input type="hidden" name="_csrf" value="hey"/>
      <input type="text" name="query" placeholder="Search"/>
      <input type="submit" value="Search"/>
    </form>
  </body>
</html>
<html>
  <body>
    <form method="POST" action="/search">
      <input type="hidden" name="_csrf" value="hey"/>
    </form>
  </body>
</html>
<div id="foo">
  <div id="bar">
    <p>one</p>
    <p>two</p>
    <p>three</p>
  </div>
</div>
<div id="baz">123
</div>
